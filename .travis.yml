language: php

php:
  - 5.5

before_script:
  - cd ..
  - git clone git://github.com/uthando-cms/uthando.git
  - cd uthando
  - composer install --no-dev
  - composer require --update-no-dev dompdf/dompdf:0.6.*
  - composer require --update-no-dev uthando-cms/uthando-common:1.*
  - composer require --update-no-dev codeclimate/php-test-reporter
  - cp -R ../uthando-dompdf ./module/UthandoDomPdf

script:
  - cd module/UthandoDomPdf/test
  - phpunit --coverage-text --coverage-clover ./build/logs/clover.xml

after_script:
  - CODECLIMATE_REPO_TOKEN=b09ba9b7374cf4893b84c0cd870d44ae26b070e0e85205ada90e27dc2c1c81f6 ../../../vendor/bin/test-reporter
